{"version":3,"sources":["webpack:///src/views/frontuser/site.vue","webpack:///./src/views/frontuser/site.vue?f124","webpack:///./src/views/frontuser/site.vue"],"names":["site","components","data","userSiteListData","multipleSelection","roles","companys","positions","tableForm","listLoading","saveLoading","mounted","this","getUserSiteList","$route","params","id","methods","userid","_this","Object","api","USERID","then","res","success","listData","handleSelectionChange","val","i","length","$set","filterHandler","value","row","column","handleCheckChange","index","bstartfog","bsms","bwarn","changeFog","changeSms","changeWarn","saveUserSite","_this2","$refs","userSiteForm","validate","valid","para","keys","k","bchecked","_k","newstr","push","isNull","substring","_k2","join","$message","message","type","tags","JSON","parse","sessionStorage","getItem","filter","item","path","$store","commit","stringify_default","closeUserSite","msg","$router","replace","result","frontuser_site","render","_vm","_h","$createElement","_c","_self","attrs","span","offset","ref","model","directives","name","rawName","expression","staticStyle","width","tooltip-effect","height","on","selection-change","prop","scopedSlots","_u","key","fn","scope","disabled","usersitetype","checked","$index","change","$event","callback","$$v","_v","label","_s","min-width","sortable","show-overflow-tooltip","icon","circle","click","staticClass","loading","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2IAwJAA,GACAC,cAEAC,KAHA,WAIA,OACAC,oBACAC,qBACAC,SACAC,YACAC,aACAC,aACAC,aAAA,EACAC,aAAA,IAGAC,QAfA,WAgBAC,KAAAC,gBAAAD,KAAAE,OAAAC,OAAAC,KAEAC,SACAJ,gBADA,SACAK,GAAA,IAAAC,EAAAP,KACAA,KAAAH,aAAA,EACYW,OAAAC,EAAA,KAAAD,EAAZE,OAAAJ,IAAAK,KAAA,SAAAC,GACAA,EAAAC,SACAN,EAAAX,UAAAkB,SAAAF,EAAAtB,KAkCAiB,EAAAV,aAAA,GAYAU,EAAAV,aAAA,KAIAkB,sBAvDA,SAuDAC,GACAhB,KAAAR,kBAAAwB,EAKA,QAAAC,EAAA,EAAAA,EAAAjB,KAAAJ,UAAAkB,SAAAI,OAAAD,IACA,GAAAD,EAAAE,OAAA,GAEAlB,KAAAJ,UAAAkB,SAAAG,GAAAP,QAAAM,IAAAE,OAAA,GACA,CACAlB,KAAAmB,KAAAnB,KAAAJ,UAAAkB,SAAAG,GAAA,eAEA,QAKAG,cAzEA,SAyEAC,EAAAC,EAAAC,GAEA,OAAAD,EADAC,EAAA,YACAF,GAEAG,kBA7EA,SA6EAR,EAAAS,GACAT,IAIAhB,KAAAJ,UAAAkB,SAAAW,GAAAC,UAAA,EACA1B,KAAAJ,UAAAkB,SAAAW,GAAAE,KAAA,EACA3B,KAAAJ,UAAAkB,SAAAW,GAAAG,MAAA,IAGAC,UAvFA,SAuFAJ,GACA,IAAAT,EAAAhB,KAAAJ,UAAAkB,SAAAW,GAAAC,UACA1B,KAAAJ,UAAAkB,SAAAW,GAAAC,UAAA,GAAAV,EAAA,KAEAc,UA3FA,SA2FAL,GACA,IAAAT,EAAAhB,KAAAJ,UAAAkB,SAAAW,GAAAE,KACA3B,KAAAJ,UAAAkB,SAAAW,GAAAE,KAAA,GAAAX,EAAA,KAEAe,WA/FA,SA+FAN,GACA,IAAAT,EAAAhB,KAAAJ,UAAAkB,SAAAW,GAAAG,MACA5B,KAAAJ,UAAAkB,SAAAW,GAAAG,MAAA,GAAAZ,EAAA,KAEAgB,aAnGA,WAmGA,IAAAC,EAAAjC,KACAA,KAAAkC,MAAAC,aAAAC,SAAA,SAAAC,GACA,GAAAA,EAAA,CACAJ,EAAAnC,aAAA,EAgCA,IA/BA,IAAAwC,KACAC,GACA,UACA,SACA,QACA,aACA,WACA,YACA,YACA,MACA,UACA,WACA,YACA,YACA,QACA,WACA,WACA,UACA,UACA,SACA,UACA,YACA,cACA,QACA,YACA,aACA,UACA,QACA,YACA,SAEAC,EAAA,EAAAA,EAAAD,EAAArB,OAAAsB,IACAF,EAAAC,EAAAC,OAEA,QAAAvB,EAAA,EAAAA,EAAAgB,EAAArC,UAAAkB,SAAAI,OAAAD,IACA,MAAAgB,EAAArC,UAAAkB,SAAAG,GAAAwB,SAEA,QAAAC,EAAA,EAAAA,EAAAH,EAAArB,OAAAwB,IAAA,CACA,IAAAC,EAAA,MAEA,SAAAJ,EAAAG,IACA,UAAAH,EAAAG,IACA,cAAAH,EAAAG,KAEAC,EAAA,GAEAL,EAAAC,EAAAG,IAAAE,KACAX,EAAAY,OACAZ,EAAArC,UAAAkB,SAAAG,GACAsB,EAAAG,GAAAI,UACA,EACAP,EAAAG,GAAAxB,OAAA,IAGAyB,IAMA,IAAAxC,KACAA,EAAAO,OAAAuB,EAAA/B,OAAAC,OAAAC,GACA,QAAA2C,EAAA,EAAAA,EAAAR,EAAArB,OAAA6B,IACA5C,EAAAoC,EAAAQ,IAAAT,EAAAC,EAAAQ,IAAAC,KAAA,KAGoBxC,OAAAC,EAAA,KAAAD,CAApBL,GAAAQ,KAAA,SAAAC,GACA,GAAAA,EAAAC,SAAAD,EAAAtB,KAAA,GACA2C,EAAAgB,UACAC,QAAA,OACAC,KAAA,YAGA,IAAAC,EAAAC,KAAAC,MACAC,eAAAC,QAAA,SACAC,OAAA,SAAAC,GACA,OAAAA,EAAAC,MAAA1B,EAAA/B,OAAAyD,OAGA1B,EAAA2B,OAAAC,OACA,eACAC,IAAAV,IAGAnB,EAAA8B,qBAEA9B,EAAAgB,UACAC,QAAAtC,EAAAoD,IACAb,KAAA,UAGAlB,EAAAnC,aAAA,QAKAiE,cAvMA,WAwMA/D,KAAAiE,QAAAC,QAAA,qBAEArB,OA1MA,SA0MA7B,EAAAmD,GACA,IAAAxB,EAAAwB,EAKA,OAJAnD,IACA2B,EAAA3B,GAGA2B,KCnXeyB,GADEC,OANjB,WAA0B,IAAAC,EAAAtE,KAAauE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAAA,EAAA,UAAAA,EAAA,UAA+CE,OAAOC,KAAA,GAAAC,OAAA,KAAsBJ,EAAA,WAAgBK,IAAA,eAAAH,OAA0BI,MAAAT,EAAA1E,aAAuB6E,EAAA,YAAiBO,aAAaC,KAAA,UAAAC,QAAA,YAAA7D,MAAAiD,EAAA,YAAAa,WAAA,gBAAoFL,IAAA,kBAAAM,aAAqCC,MAAA,QAAeV,OAAQrF,KAAAgF,EAAA1E,UAAAkB,SAAAwE,iBAAA,OAAAC,OAAA,sBAAoFC,IAAKC,mBAAAnB,EAAAvD,yBAA8C0D,EAAA,mBAAwBE,OAAOU,MAAA,KAAAK,KAAA,YAA+BC,YAAArB,EAAAsB,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAtB,EAAA,gBAAAA,EAAA,eAA6CE,OAAOM,KAAA,WAAAe,SAAA,GAAAD,EAAAzE,IAAA2E,aAAAC,QACpsB,GADosB5B,EAAA1E,UAAAkB,SAAAiF,EAAAI,QACpsB1D,UAA2D+C,IAAKY,OAAA,SAAAC,GAA0B,OAAA/B,EAAA9C,kBAC1F6E,EACAN,EAAAI,UAC2CpB,OAAQ1D,MAAA0E,EAAAzE,IAAA,SAAAgF,SAAA,SAAAC,GAAoDjC,EAAAnD,KAAA4E,EAAAzE,IAAA,WAAAiF,IAAqCpB,WAAA,yBAAkC,UAAWb,EAAAkC,GAAA,KAAA/B,EAAA,mBAAoCE,OAAO8B,MAAA,KAAApB,MAAA,OAA2BM,YAAArB,EAAAsB,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAzB,EAAAkC,GAAAlC,EAAAoC,GAAAX,EAAAI,OAAA,WAA8C7B,EAAAkC,GAAA,KAAA/B,EAAA,mBAAoCE,OAAOe,KAAA,gBAAAe,MAAA,SAAAE,YAAA,IAAAC,SAAA,MAAuEtC,EAAAkC,GAAA,KAAA/B,EAAA,mBAAoCE,OAAOe,KAAA,WAAAe,MAAA,QAAAE,YAAA,IAAAC,SAAA,GAAAC,wBAAA,MAA4FvC,EAAAkC,GAAA,KAAA/B,EAAA,mBAAoCE,OAAOe,KAAA,YAAAe,MAAA,OAAAE,YAAA,KAAkDhB,YAAArB,EAAAsB,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAtB,EAAA,gBAA2BE,OAAOe,KAAA,YAAAK,EAAA,wBAAuD,KAAAA,EAAAzE,IAAAI,UAAA+C,EAAA,aAA+CE,OAAOxB,KAAA,UAAA2D,KAAA,gBAAAC,OAAA,GAAAf,SAAA,KAAAD,EAAAzE,IAAAmB,UAAyF+C,IAAKwB,MAAA,SAAAX,GAAyB,OAAA/B,EAAAzC,UAAAkE,EAAAI,YAAqC1B,EAAA,aAAkBE,OAAOmC,KAAA,gBAAAC,OAAA,GAAAf,SAAA,KAAAD,EAAAzE,IAAAmB,UAAwE+C,IAAKwB,MAAA,SAAAX,GAAyB,OAAA/B,EAAAzC,UAAAkE,EAAAI,aAAqC,UAAW7B,EAAAkC,GAAA,KAAA/B,EAAA,mBAAoCE,OAAOe,KAAA,QAAAe,MAAA,OAAAE,YAAA,KAA8ChB,YAAArB,EAAAsB,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAtB,EAAA,gBAA2BE,OAAOe,KAAA,YAAAK,EAAA,oBAAmD,KAAAA,EAAAzE,IAAAM,MAAA6C,EAAA,aAA2CE,OAAOxB,KAAA,UAAA2D,KAAA,gBAAAC,OAAA,GAAAf,SAAA,KAAAD,EAAAzE,IAAAmB,UAAyF+C,IAAKwB,MAAA,SAAAX,GAAyB,OAAA/B,EAAAvC,WAAAgE,EAAAI,YAAsC1B,EAAA,aAAkBE,OAAOmC,KAAA,gBAAAC,OAAA,GAAAf,SAAA,KAAAD,EAAAzE,IAAAmB,UAAwE+C,IAAKwB,MAAA,SAAAX,GAAyB,OAAA/B,EAAAvC,WAAAgE,EAAAI,aAAsC,UAAW7B,EAAAkC,GAAA,KAAA/B,EAAA,mBAAoCE,OAAOe,KAAA,OAAAe,MAAA,QAAAE,YAAA,KAA8ChB,YAAArB,EAAAsB,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAtB,EAAA,gBAA2BE,OAAOe,KAAA,YAAAK,EAAA,mBAAkD,KAAAA,EAAAzE,IAAAK,KAAA8C,EAAA,aAA0CE,OAAOxB,KAAA,UAAA2D,KAAA,gBAAAC,OAAA,GAAAf,SAAA,KAAAD,EAAAzE,IAAAmB,UAAyF+C,IAAKwB,MAAA,SAAAX,GAAyB,OAAA/B,EAAAxC,UAAAiE,EAAAI,YAAqC1B,EAAA,aAAkBE,OAAOmC,KAAA,gBAAAC,OAAA,GAAAf,SAAA,KAAAD,EAAAzE,IAAAmB,UAAwE+C,IAAKwB,MAAA,SAAAX,GAAyB,OAAA/B,EAAAxC,UAAAiE,EAAAI,aAAqC,WAAW,GAAA7B,EAAAkC,GAAA,KAAA/B,EAAA,gBAAqCwC,YAAA,0BAAoCxC,EAAA,aAAkBe,IAAIwB,MAAA1C,EAAAP,iBAA2BO,EAAAkC,GAAA,QAAAlC,EAAAkC,GAAA,KAAA/B,EAAA,aAA6CE,OAAOxB,KAAA,UAAA+D,QAAA5C,EAAAxE,aAA2C0F,IAAKwB,MAAA1C,EAAAtC,gBAA0BsC,EAAAkC,GAAA,6BAEtnFW,oBCHjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACElI,EACAgF,GATF,EAVA,SAAAmD,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/53.248b269c47980be53302.js","sourcesContent":["<template>\r\n    <section>\r\n        <el-row>\r\n            <el-col :span=\"20\" :offset=\"2\">\r\n                <el-form :model=\"tableForm\" ref=\"userSiteForm\">\r\n                    <el-table\r\n                        :data=\"tableForm.listData\"\r\n                        ref=\"userSiteListTbl\"\r\n                        tooltip-effect=\"dark\"\r\n                        style=\"width: 100%\"\r\n                        height=\"calc(95vh - 160px)\"\r\n                        v-loading=\"listLoading\"\r\n                        @selection-change=\"handleSelectionChange\"\r\n                    >\r\n                        <!-- <el-table-column type=\"selection\" width=\"55\"> </el-table-column> -->\r\n                        <el-table-column width=\"55\" prop=\"bchecked\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-form-item>\r\n                                    <el-checkbox\r\n                                        name=\"bchecked\"\r\n                                        v-model=\"scope.row.bchecked\"\r\n                                        :disabled=\"scope.row.usersitetype != 2\"\r\n                                        :checked=\"\r\n                                            tableForm.listData[scope.$index]\r\n                                                .bchecked == 1\r\n                                        \"\r\n                                        @change=\"\r\n                                            handleCheckChange(\r\n                                                $event,\r\n                                                scope.$index\r\n                                            )\r\n                                        \"\r\n                                    ></el-checkbox> </el-form-item\r\n                            ></template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"No\" width=\"100\">\r\n                            <template slot-scope=\"scope\">{{\r\n                                scope.$index + 1\r\n                            }}</template>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"siteshortname\"\r\n                            label=\"监测对象简称\"\r\n                            min-width=\"3\"\r\n                            sortable\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"sitename\"\r\n                            label=\"监测对象名\"\r\n                            min-width=\"4\"\r\n                            sortable\r\n                            show-overflow-tooltip\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"bstartfog\"\r\n                            label=\"启动雾炮\"\r\n                            min-width=\"1\"\r\n                        >\r\n                            <template slot-scope=\"scope\">\r\n                                <el-form-item\r\n                                    :prop=\"`listData[${scope.$index}].bstartfog`\"\r\n                                >\r\n                                    <el-button\r\n                                        type=\"success\"\r\n                                        icon=\"el-icon-check\"\r\n                                        circle\r\n                                        :disabled=\"scope.row.bchecked != '1'\"\r\n                                        v-if=\"scope.row.bstartfog == '1'\"\r\n                                        @click=\"changeFog(scope.$index)\"\r\n                                    ></el-button>\r\n                                    <el-button\r\n                                        icon=\"el-icon-close\"\r\n                                        circle\r\n                                        :disabled=\"scope.row.bchecked != '1'\"\r\n                                        v-else\r\n                                        @click=\"changeFog(scope.$index)\"\r\n                                    ></el-button> </el-form-item\r\n                            ></template>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"bwarn\"\r\n                            label=\"接收告警\"\r\n                            min-width=\"1\"\r\n                        >\r\n                            <template slot-scope=\"scope\">\r\n                                <el-form-item\r\n                                    :prop=\"`listData[${scope.$index}].bwarn`\"\r\n                                >\r\n                                    <el-button\r\n                                        type=\"success\"\r\n                                        icon=\"el-icon-check\"\r\n                                        circle\r\n                                        :disabled=\"scope.row.bchecked != '1'\"\r\n                                        v-if=\"scope.row.bwarn == '1'\"\r\n                                        @click=\"changeWarn(scope.$index)\"\r\n                                    ></el-button>\r\n                                    <el-button\r\n                                        icon=\"el-icon-close\"\r\n                                        circle\r\n                                        :disabled=\"scope.row.bchecked != '1'\"\r\n                                        v-else\r\n                                        @click=\"changeWarn(scope.$index)\"\r\n                                    ></el-button></el-form-item\r\n                            ></template>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"bsms\"\r\n                            label=\"微信+短信\"\r\n                            min-width=\"1\"\r\n                        >\r\n                            <template slot-scope=\"scope\">\r\n                                <el-form-item\r\n                                    :prop=\"`listData[${scope.$index}].bsms`\"\r\n                                >\r\n                                    <el-button\r\n                                        type=\"success\"\r\n                                        icon=\"el-icon-check\"\r\n                                        circle\r\n                                        :disabled=\"scope.row.bchecked != '1'\"\r\n                                        v-if=\"scope.row.bsms == '1'\"\r\n                                        @click=\"changeSms(scope.$index)\"\r\n                                    ></el-button>\r\n                                    <el-button\r\n                                        icon=\"el-icon-close\"\r\n                                        circle\r\n                                        :disabled=\"scope.row.bchecked != '1'\"\r\n                                        v-else\r\n                                        @click=\"changeSms(scope.$index)\"\r\n                                    ></el-button></el-form-item\r\n                            ></template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                    <el-form-item class=\"form-button mt20 mr10\">\r\n                        <el-button @click=\"closeUserSite\">取消</el-button>\r\n                        <el-button\r\n                            type=\"primary\"\r\n                            @click=\"saveUserSite\"\r\n                            :loading=\"saveLoading\"\r\n                            >保存</el-button\r\n                        >\r\n                    </el-form-item>\r\n                </el-form>\r\n            </el-col>\r\n        </el-row>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nimport { getUserSiteList, saveUserSite } from \"../../api/api\";\r\n\r\nexport default {\r\n    components: {},\r\n\r\n    data() {\r\n        return {\r\n            userSiteListData: [],\r\n            multipleSelection: [],\r\n            roles: [],\r\n            companys: [],\r\n            positions: [],\r\n            tableForm: {},\r\n            listLoading: false,\r\n            saveLoading: false,\r\n        };\r\n    },\r\n    mounted() {\r\n        this.getUserSiteList(this.$route.params.id);\r\n    },\r\n    methods: {\r\n        getUserSiteList(userid) {\r\n            this.listLoading = true;\r\n            getUserSiteList({ USERID: userid }).then((res) => {\r\n                if (res.success) {\r\n                    this.tableForm.listData = res.data;\r\n                    // let itemroles = [];\r\n                    // let itemcompanys = [];\r\n                    // let itempositions = [];\r\n                    // res.data.forEach((item) => {\r\n                    //     itemroles.push(item.rolename);\r\n                    //     itemcompanys.push(item.company);\r\n                    //     itempositions.push(item.position);\r\n                    // });\r\n\r\n                    // this.roles = [...new Set(itemroles)] //去重复\r\n                    //     .sort((a, b) => {\r\n                    //         //排序\r\n                    //         return a.localeCompare(b);\r\n                    //     })\r\n                    //     .map((item) => {\r\n                    //         //转成对象数组\r\n                    //         return { text: item, value: item };\r\n                    //     });\r\n                    // this.companys = [...new Set(itemcompanys)]\r\n                    //     .sort((a, b) => {\r\n                    //         return a.localeCompare(b);\r\n                    //     })\r\n                    //     .map((item) => {\r\n                    //         return { text: item, value: item };\r\n                    //     });\r\n\r\n                    // this.positions = [...new Set(itempositions)]\r\n                    //     .sort((a, b) => {\r\n                    //         return a.localeCompare(b);\r\n                    //     })\r\n                    //     .map((item) => {\r\n                    //         return { text: item, value: item };\r\n                    //     });\r\n                    this.listLoading = false;\r\n                    // this.$nextTick(() => {\r\n                    //     // this.tableForm.listData.forEach((row) => {\r\n                    //     //     if (row.bchecked == \"1\") {\r\n                    //     //         this.$refs.siteUserListTbl.toggleRowSelection(\r\n                    //     //             row,\r\n                    //     //             true\r\n                    //     //         );\r\n                    //     //     }\r\n                    //     // });\r\n                    // });\r\n                } else {\r\n                    this.listLoading = false;\r\n                }\r\n            });\r\n        },\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val;\r\n            // var checkedUserids = [];\r\n            // checkedUserids = val.map((item) => {\r\n            //     return item.USERID;\r\n            // });\r\n            for (let i = 0; i < this.tableForm.listData.length; i++) {\r\n                if (val.length > 0) {\r\n                    if (\r\n                        this.tableForm.listData[i].USERID == val[val.length - 1]\r\n                    ) {\r\n                        this.$set(this.tableForm.listData[i], \"bstartfog\", 0);\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        filterHandler(value, row, column) {\r\n            const property = column[\"property\"];\r\n            return row[property] === value;\r\n        },\r\n        handleCheckChange(val, index) {\r\n            if (val) {\r\n                //勾上\r\n            } else {\r\n                //去掉钩子\r\n                this.tableForm.listData[index].bstartfog = 0;\r\n                this.tableForm.listData[index].bsms = 0;\r\n                this.tableForm.listData[index].bwarn = 0;\r\n            }\r\n        },\r\n        changeFog(index) {\r\n            let val = this.tableForm.listData[index].bstartfog;\r\n            this.tableForm.listData[index].bstartfog = val == 1 ? 0 : 1;\r\n        },\r\n        changeSms(index) {\r\n            let val = this.tableForm.listData[index].bsms;\r\n            this.tableForm.listData[index].bsms = val == 1 ? 0 : 1;\r\n        },\r\n        changeWarn(index) {\r\n            let val = this.tableForm.listData[index].bwarn;\r\n            this.tableForm.listData[index].bwarn = val == 1 ? 0 : 1;\r\n        },\r\n        saveUserSite() {\r\n            this.$refs.userSiteForm.validate((valid) => {\r\n                if (valid) {\r\n                    this.saveLoading = true;\r\n                    let para = {};\r\n                    const keys = [\r\n                        \"SITEIDS\",\r\n                        \"bwarns\",\r\n                        \"bsmss\",\r\n                        \"bstartfogs\",\r\n                        \"troubles\",\r\n                        \"trouble2s\",\r\n                        \"trouble3s\",\r\n                        \"pms\",\r\n                        \"unwashs\",\r\n                        \"washoffs\",\r\n                        \"washoff2s\",\r\n                        \"washoff3s\",\r\n                        \"specs\",\r\n                        \"tipovers\",\r\n                        \"nospec1s\",\r\n                        \"cable1s\",\r\n                        \"unloads\",\r\n                        \"fences\",\r\n                        \"helmets\",\r\n                        \"strangers\",\r\n                        \"trespassers\",\r\n                        \"fires\",\r\n                        \"overloads\",\r\n                        \"cameraoffs\",\r\n                        \"invades\",\r\n                        \"soils\",\r\n                        \"airtights\",\r\n                        \"vests\",\r\n                    ];\r\n                    for (let k = 0; k < keys.length; k++) {\r\n                        para[keys[k]] = [];\r\n                    }\r\n                    for (let i = 0; i < this.tableForm.listData.length; i++) {\r\n                        if (this.tableForm.listData[i].bchecked == 1) {\r\n                            // para.push(this.tableForm.listData[i]);\r\n                            for (let k = 0; k < keys.length; k++) {\r\n                                let newstr = \"000\";\r\n                                if (\r\n                                    keys[k] == \"bsmss\" ||\r\n                                    keys[k] == \"bwarns\" ||\r\n                                    keys[k] == \"bstartfogs\"\r\n                                ) {\r\n                                    newstr = 0;\r\n                                }\r\n                                para[keys[k]].push(\r\n                                    this.isNull(\r\n                                        this.tableForm.listData[i][\r\n                                            keys[k].substring(\r\n                                                0,\r\n                                                keys[k].length - 1\r\n                                            )\r\n                                        ],\r\n                                        newstr\r\n                                    )\r\n                                );\r\n                            }\r\n                        }\r\n                    }\r\n                    let params = {};\r\n                    params.USERID = this.$route.params.id;\r\n                    for (let k = 0; k < keys.length; k++) {\r\n                        params[keys[k]] = para[keys[k]].join(\",\");\r\n                    }\r\n\r\n                    saveUserSite(params).then((res) => {\r\n                        if (res.success && res.data > 0) {\r\n                            this.$message({\r\n                                message: \"保存成功\",\r\n                                type: \"success\",\r\n                            });\r\n                            //关闭tab后跳转\r\n                            let tags = JSON.parse(\r\n                                sessionStorage.getItem(\"Tags\")\r\n                            ).filter((item) => {\r\n                                return item.path != this.$route.path;\r\n                            });\r\n\r\n                            this.$store.commit(\r\n                                \"saveTagsData\",\r\n                                JSON.stringify(tags)\r\n                            );\r\n\r\n                            this.closeUserSite();\r\n                        } else {\r\n                            this.$message({\r\n                                message: res.msg,\r\n                                type: \"error\",\r\n                            });\r\n                        }\r\n                        this.saveLoading = false;\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        closeUserSite() {\r\n            this.$router.replace(`/frontuser/index`);\r\n        },\r\n        isNull(val, result) {\r\n            let newstr = result;\r\n            if (val) {\r\n                newstr = val;\r\n            }\r\n\r\n            return newstr;\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style  scoped>\r\n.el-form-item {\r\n    margin-bottom: 0;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/frontuser/site.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('el-row',[_c('el-col',{attrs:{\"span\":20,\"offset\":2}},[_c('el-form',{ref:\"userSiteForm\",attrs:{\"model\":_vm.tableForm}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],ref:\"userSiteListTbl\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableForm.listData,\"tooltip-effect\":\"dark\",\"height\":\"calc(95vh - 160px)\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"width\":\"55\",\"prop\":\"bchecked\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-form-item',[_c('el-checkbox',{attrs:{\"name\":\"bchecked\",\"disabled\":scope.row.usersitetype != 2,\"checked\":_vm.tableForm.listData[scope.$index]\n                                            .bchecked == 1},on:{\"change\":function($event){return _vm.handleCheckChange(\n                                            $event,\n                                            scope.$index\n                                        )}},model:{value:(scope.row.bchecked),callback:function ($$v) {_vm.$set(scope.row, \"bchecked\", $$v)},expression:\"scope.row.bchecked\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"No\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.$index + 1))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"siteshortname\",\"label\":\"监测对象简称\",\"min-width\":\"3\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"sitename\",\"label\":\"监测对象名\",\"min-width\":\"4\",\"sortable\":\"\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bstartfog\",\"label\":\"启动雾炮\",\"min-width\":\"1\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-form-item',{attrs:{\"prop\":(\"listData[\" + (scope.$index) + \"].bstartfog\")}},[(scope.row.bstartfog == '1')?_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-check\",\"circle\":\"\",\"disabled\":scope.row.bchecked != '1'},on:{\"click\":function($event){return _vm.changeFog(scope.$index)}}}):_c('el-button',{attrs:{\"icon\":\"el-icon-close\",\"circle\":\"\",\"disabled\":scope.row.bchecked != '1'},on:{\"click\":function($event){return _vm.changeFog(scope.$index)}}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bwarn\",\"label\":\"接收告警\",\"min-width\":\"1\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-form-item',{attrs:{\"prop\":(\"listData[\" + (scope.$index) + \"].bwarn\")}},[(scope.row.bwarn == '1')?_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-check\",\"circle\":\"\",\"disabled\":scope.row.bchecked != '1'},on:{\"click\":function($event){return _vm.changeWarn(scope.$index)}}}):_c('el-button',{attrs:{\"icon\":\"el-icon-close\",\"circle\":\"\",\"disabled\":scope.row.bchecked != '1'},on:{\"click\":function($event){return _vm.changeWarn(scope.$index)}}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bsms\",\"label\":\"微信+短信\",\"min-width\":\"1\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-form-item',{attrs:{\"prop\":(\"listData[\" + (scope.$index) + \"].bsms\")}},[(scope.row.bsms == '1')?_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-check\",\"circle\":\"\",\"disabled\":scope.row.bchecked != '1'},on:{\"click\":function($event){return _vm.changeSms(scope.$index)}}}):_c('el-button',{attrs:{\"icon\":\"el-icon-close\",\"circle\":\"\",\"disabled\":scope.row.bchecked != '1'},on:{\"click\":function($event){return _vm.changeSms(scope.$index)}}})],1)]}}])})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"form-button mt20 mr10\"},[_c('el-button',{on:{\"click\":_vm.closeUserSite}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":_vm.saveUserSite}},[_vm._v(\"保存\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-132946dd\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/frontuser/site.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-132946dd\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./site.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./site.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./site.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-132946dd\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./site.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-132946dd\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/frontuser/site.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}