(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"06e39":function(t,e,a){},"1b2c":function(t,e,a){"use strict";var n=a("99ce"),i=a.n(n);i.a},"295a":function(t,e,a){"use strict";var n=a("2997"),i=a.n(n);i.a},2997:function(t,e,a){},"2af9":function(t,e,a){"use strict";a.d(e,"a",(function(){return c})),a.d(e,"f",(function(){return g})),a.d(e,"c",(function(){return M})),a.d(e,"d",(function(){return I})),a.d(e,"i",(function(){return G})),a.d(e,"b",(function(){return H})),a.d(e,"h",(function(){return it})),a.d(e,"g",(function(){return ft})),a.d(e,"e",(function(){return vt}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"border_container",class:{borderSharp:t.isSharp}},[a("div",{staticClass:"border_box",style:t.boxStyle},[t._t("default")],2)])},i=[],r={name:"BorderBox",props:{boxStyle:{type:String},isSharp:{type:Boolean,default:!0}}},s=r,o=(a("50d8"),a("2877")),l=Object(o["a"])(s,n,i,!1,null,"74d3ea83",null),c=l.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"titleMain",class:t.noBg?"noBg":""},["default"==t.type?a("div",{staticClass:"title-type"},[a("div",{staticClass:"title"},[a("h3",[a("i",{staticClass:"iconfont icona-Frame2"}),t._v(t._s(t.title))]),a("h4",[t._v(t._s(t.tip))])]),a("span",{class:{subLink:t.subLink},on:{click:t.tapMore}},[t._v(t._s(t.subtitle))])]):t._e(),"button"==t.type?a("div",{staticClass:"title-type"},[a("h3",[a("i",{staticClass:"iconfont icona-Frame2"}),t._v(t._s(t.title))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.tapButton}},[t._v("查看")])],1):t._e(),"date"==t.type?a("div",{staticClass:"title-type"},[a("h3",[a("i",{staticClass:"iconfont icona-Frame2"}),t._v(t._s(t.title))]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"~",size:"small","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":t.dateOpt,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.titleDate,callback:function(e){t.titleDate=e},expression:"titleDate"}})],1):t._e(),"tab"==t.type?a("div",{staticClass:"title-type"},[a("h3",[t.noBg?t._e():a("i",{staticClass:"iconfont icona-Frame2"}),t._v(t._s(t.title)+" ")]),a("ul",{staticClass:"tab-list"},t._l(t.tabs,(function(e,n){return a("li",{key:n,class:{active:t.tabIndex==n},on:{click:function(e){return t.tabChange(n)}}},[t._v(" "+t._s(e)+" ")])})),0)]):t._e(),"select"==t.type?a("div",{staticClass:"title-type title-type-select left"},[a("h3",[a("i",{staticClass:"iconfont icona-Frame2"}),t._v(t._s(t.title))]),a("el-select",{on:{change:t.selChange},model:{value:t.selectedData,callback:function(e){t.selectedData=e},expression:"selectedData"}},t._l(t.selOpts,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1):t._e()])},p=[],d=(a("a9e3"),a("c1df")),f=a.n(d),h={name:"TitleBox",data:function(){return{titleDate:this.dateRange,dateOpt:{disabledDate:function(t){return t.getTime()<f()().add(-1,"year").valueOf()}},selectedData:""}},props:{tabs:{type:Array,default:function(){return[]}},type:{type:String,default:"default"},title:{type:String,default:"标题"},subtitle:{type:String,default:""},subLink:{type:Boolean,default:!0},tabIndex:{type:Number,default:0},selData:{type:String},selOpts:{type:Array,default:function(){return[]}},tip:{type:String},dateRange:{type:Array,default:function(){return[]}},noBg:{type:Boolean,default:!1}},watch:{titleDate:{deep:!0,handler:function(t,e){this.$emit("search",t)}},selData:{immediate:!0,deep:!0,handler:function(t,e){this.selectedData=t}}},mounted:function(){},methods:{tapMore:function(){this.$emit("mtap")},tapButton:function(){this.$emit("rtap")},tabChange:function(t){this.$emit("tab",t)},selChange:function(t){this.$emit("selChange",t)}}},m=h,y=(a("f144"),Object(o["a"])(m,u,p,!1,null,"139c90c2",null)),g=y.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative-title"},[n("img",{attrs:{src:a("7b11")}}),n("h4",[t._v(t._s(t.title))]),n("img",{attrs:{src:a("35ff")}})])},v=[],w={name:"TitleBox",data:function(){return{}},props:{title:{type:String,default:"标题"}},mounted:function(){},methods:{}},D=w,x=(a("1b2c"),Object(o["a"])(D,b,v,!1,null,"44846cc4",null)),M=x.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:"width:"+t.size+"px;height:"+t.size+"px;padding:"+parseInt(t.size/30)+"px;background:"+t.background},[a("div",{ref:"qrcode",staticClass:"qrcode"})])},C=[],k=a("d044"),S=a.n(k),Y={props:{color:{type:String,default:"#000000"},text:{type:String,default:""},size:{type:Number,default:60},background:{type:String,default:"#ffffff"}},data:function(){return{qrcode:null}},created:function(){this.createQrcode()},methods:{createQrcode:function(){var t=this;this.$nextTick((function(e){t.qrcode=new S.a(t.$refs.qrcode,{text:t.text,width:t.size,height:t.size,colorDark:t.color,colorLight:t.background,correctLevel:S.a.CorrectLevel.H})}))}}},B=Y,L=(a("6264"),Object(o["a"])(B,_,C,!1,null,"7b1c8a5c",null)),I=L.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alarm-list-main"},[a("border-box",[a("title-box",{attrs:{title:t.title,type:"default",subtitle:"更多"},on:{mtap:function(e){return t.showMore()}}}),a("ul",{staticClass:"alarm-list",staticStyle:{height:"calc(100% - 40px)"}},[a("vue-seamless-scroll",{staticClass:"seamless-warp-table",attrs:{"class-option":{step:.3},data:t.warnData}},t._l(t.warnData,(function(e,n){return a("li",{key:n},[a("i",{staticClass:"el-icon-caret-right"}),a("span",[t._v(t._s(e.content))])])})),0)],1)],1),a("el-dialog",{attrs:{title:"告警信息",visible:t.alarmMoreVisible,width:"60%",top:"5vh"},on:{"update:visible":function(e){t.alarmMoreVisible=e}}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~",size:"small","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:t.warnDate,callback:function(e){t.warnDate=e},expression:"warnDate"}}),a("el-button",{staticClass:"ml10",on:{click:t.search}},[t._v("搜索")]),a("el-table",{staticClass:"mt10",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"No",width:"50",align:"center",type:"index",index:t.getRowIndex}}),a("el-table-column",{attrs:{prop:"createdate",label:"时间","min-width":"2","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"type",label:"类型","min-width":"1","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.warntypes[e.row.type]))])]}}])}),a("el-table-column",{attrs:{prop:"devcode",label:"设备编号","min-width":"1","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"content",label:"内容","min-width":"4","show-overflow-tooltip":""}})],1),a("el-pagination",{staticClass:"mt20 fr",attrs:{layout:"total,prev, pager, next","page-size":t.pageSize,"current-page":t.pageIndex,total:t.totalCount},on:{"current-change":t.pageChange}})],1)],1)},T=[],$=(a("ac1f"),a("841c"),a("96cf"),a("1da1")),O=a("365c"),E=a("ac0d"),R=a("a939"),W=a.n(R),N={components:{BorderBox:c,TitleBox:g,vueSeamlessScroll:W.a},props:{warnType:{type:Number},title:{type:String,default:"实时告警信息"}},data:function(){return{tableData:[],isComWarnLoading:!1,hisDate:f()(new Date).format("YYYY-MM-DD"),pageSize:10,pageIndex:1,totalCount:0,warnData:[],alarmMoreVisible:!1,warnDate:[f()().add(-1,"years").format("YYYY-MM-DD"),f()(new Date).format("YYYY-MM-DD")],keyword:"",listStartDate:f()(new Date).format("YYYY-MM-DD"),warntypes:E["i"]}},mixins:[E["i"]],watch:{warnType:{immediate:!0,deep:!0,handler:function(t,e){this.getTopList()}},site:{immediate:!0,deep:!0,handler:function(t,e){this.getTopList()}}},computed:{MENUID:function(){return this.$store.state.MENUID},site:function(){return this.$store.state.site}},mounted:function(){this.getTopList},methods:{getRowIndex:function(t){return t+1+(this.pageIndex-1)*this.pageSize},pageChange:function(t){this.pageIndex=t,this.getWarnList(this.warnDate[0],this.warnDate[1])},search:function(){this.pageIndex=1,this.getWarnList(this.warnDate[0],this.warnDate[1])},showMore:function(){this.warnDate[0]=this.listStartDate,this.pageIndex=1,this.alarmMoreVisible=!0,this.search()},getTopList:function(){var t=f()().add(-1,"years").format("YYYY-MM-DD"),e=f()().format("YYYY-MM-DD");this.getWarnList(t,e,!0)},getWarnList:function(t,e,a){var n=this;return Object($["a"])(regeneratorRuntime.mark((function i(){var r,s,o,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!(!n.MENUID||n.warnType<=0||n.isComWarnLoading)){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,O["a"].getWarnList(n.MENUID,{type:n.warnType,startTime:f()(t).format("YYYY-MM-DD"),endTime:f()(e).format("YYYY-MM-DD"),keyword:n.keyword,pageIndex:a?1:n.pageIndex,pageSize:a?20:n.pageSize});case 4:r=i.sent,s=r.success,o=r.data,s&&o&&(l=0,o.length>0&&(l=o[0]["totalcount"],a&&(n.listStartDate=f()(o[o.length-1]["createdate"]).format("YYYY-MM-DD"))),a?n.warnData=o:(n.totalCount=l,n.tableData=o)),n.isComWarnLoading=!1;case 9:case"end":return i.stop()}}),i)})))()}}},j=N,q=(a("472d"),Object(o["a"])(j,z,T,!1,null,"461eeedf",null)),G=q.exports,A=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dev-map-main"},[a("div",{staticClass:"map",attrs:{id:"mapGl"}})])}],U=(a("99af"),a("d81d"),a("7b17")),P=a("5d8f"),V=a.n(P),Z=(a("4360"),{components:{},props:{type:{type:Number}},data:function(){return{map:null,points:[],sitePoint:{},BMapGL:null}},mixins:[E["a"]],watch:{type:{immediate:!0,deep:!0,handler:function(t,e){}},site:{immediate:!0,deep:!0,handler:function(t,e){}}},computed:{site:function(){return this.$store.state.site}},mounted:function(){this.loadMap()},methods:{loadMap:function(){var t=this;Object(U["a"])().then((function(e){t.BMapGL=e;var a=new t.BMapGL.Map("mapGl"),n=a.getViewport([{lng:t.site.sitelng,lat:t.site.sitelat}]),i=17,r=n.center;a.centerAndZoom(r,i),a.enableScrollWheelZoom(!0),a.setDefaultCursor("pointer"),a.setMaxZoom(20),a.setMapStyleV2({styleId:E["a"]}),a.setDisplayOptions({poiText:!0,poiIcon:!1,building:!1}),t.map=a,t.getDeviceMap()})).catch((function(t){console.log(t)}))},loadMarkers:function(){for(var t=0;t<this.points.length;t++)this.setMarker(this.points[t])},setMarker:function(t){var e=this,a=new this.BMapGL.Marker(new this.BMapGL.Point(t.lng,t.lat)),n=34,i=46,r=(this.type-1)*(n+1),s=new this.BMapGL.Icon(V.a,new this.BMapGL.Size(n+1,i),{anchor:new this.BMapGL.Size(n/2,i),imageOffset:new this.BMapGL.Size(r,0)});s.setImageSize(new this.BMapGL.Size(350,46)),a.setIcon(s);var o="<span style='display:block'>名称：".concat(t.equipname,"</span>\n   <span style='display:block'>编号：").concat(t.equipcode,'</span>\n    <a style=\'color:#45cbff;font-size:10px;float:right;margin-bottom:5px\' id="linkOne"}">显示到右侧监控信息》</a>'),l=new this.BMapGL.InfoWindow(o,{title:"设备信息"});l.addEventListener("open",(function(a){document.getElementById("linkOne").onclick=function(){e.goDetail(t.equipcode)}})),a.addEventListener("click",(function(){this.openInfoWindow(l)})),this.map.addOverlay(a)},goDetail:function(t){this.$emit("goDetail",t)},getDeviceMap:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.points=[],e.next=3,O["a"].getDeviceMap({type:t.type});case 3:a=e.sent,n=a.success,i=a.data,n&&i&&(t.points=i.map((function(t){return{lng:t.equiplng,lat:t.equiplat,equipcode:t.equipcode,equipname:t.equipname}})),t.loadMarkers(),r=t.map.getViewport(t.points),s=r.zoom,o=r.center,t.map.centerAndZoom(o,s));case 7:case"end":return e.stop()}}),e)})))()}}}),J=Z,Q=(a("e22e"),Object(o["a"])(J,A,F,!1,null,"5b469b5b",null)),H=Q.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alarm-list-main"},[a("border-box",[a("title-box",{attrs:{title:"告警统计",type:"date",dateRange:t.dateRange},on:{search:t.searchWarnDaily}}),a("div",{staticClass:"pie-echarts",staticStyle:{height:"calc(100% - 40px)"},attrs:{id:"warnDailyChart"}})],1)],1)},X=[],tt=a("313e"),et={components:{BorderBox:c,TitleBox:g},props:{warnType:{type:Number}},data:function(){return{warnDailyChart:null,dateRange:[f()().add(-1,"month").format("YYYY-MM-DD"),f()().format("YYYY-MM-DD")]}},watch:{warnType:{immediate:!0,deep:!0,handler:function(t,e){}},site:{immediate:!0,deep:!0,handler:function(t,e){var a=this;this.$nextTick((function(){a.getWarnDaily(a.dateRange)}))}}},computed:{MENUID:function(){return this.$store.state.MENUID},site:function(){return this.$store.state.site}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},methods:{initChart:function(){var t=this,e=document.getElementById("warnDailyChart");if(e){this.warnDailyChart=tt.init(e),window.addEventListener("resize",(function(){t.warnDailyChart.resize()}));var a={color:[new tt.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#FFB800"},{offset:1,color:"#FFB80000"}],!1)],grid:{left:"20",top:"15",bottom:"5",right:"20",containLabel:!0},tooltip:{trigger:"axis"},yAxis:[{type:"value",axisLine:{show:!0,lineStyle:{color:"rgba(204,204,204,0.5)"}},axisLabel:{textStyle:{color:"rgba(204,204,204,0.5)",fontSize:10}},splitLine:{show:!0,lineStyle:{color:"rgba(31,80,152,0.2)"}}}],xAxis:{type:"category",data:[],splitLine:{show:!1},axisLabel:{textStyle:{color:"rgba(204,204,204,0.5)",fontSize:10,fontFamily:"Arial Narrow"}},axisTick:{alignWithLabel:!0}},series:[{name:"数量",type:"bar",barMaxWidth:20,data:[]}]};this.warnDailyChart.setOption(a)}},loadData:function(t){var e=t.map((function(t){return t.billdate})),a=t.map((function(t){return t.warncount})),n={xAxis:{data:e},series:[{name:"数量",data:a}]};this.warnDailyChart.setOption(n)},getWarnDaily:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function a(){var n,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(!e.MENUID||e.warnType<=0||e.dateRange.length<2)){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,O["a"].getWarnDaily(e.MENUID,{deviceType:e.warnType,startTime:t[0],endTime:t[1]});case 4:n=a.sent,i=n.success,r=n.data,i&&r&&e.loadData(r);case 8:case"end":return a.stop()}}),a)})))()},searchWarnDaily:function(t){this.getWarnDaily(t)}}},at=et,nt=(a("b631"),Object(o["a"])(at,K,X,!1,null,"0eb6be44",null)),it=nt.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"video-player"},[a("video-player",{staticClass:"vjs-custom-skin",attrs:{options:{autoplay:t.autoplay,muted:t.muted,loop:t.loop,bigPlayButton:t.bigPlayButton,preload:t.preload,language:t.language,aspectRatio:t.aspectRatio,fluid:t.fluid,hls:t.hls,sources:[{src:t.src,type:t.type}],html5:{hls:{withCredentials:!1}},flash:{hls:{withCredentials:!1},swf:t.swfUrl},techOrder:["html5","flash"]}},on:{ready:t.playerReady}})],1)},st=[],ot=a("d6d3"),lt=(a("fda2"),a("451f"),a("b5c1"),a("a151"),a("6922"),a("29fb")),ct=a.n(lt),ut={components:{videoPlayer:ot["videoPlayer"]},props:{autoplay:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},bigPlayButton:{type:Boolean,default:!0},fluid:{type:Boolean,default:!0},hls:{type:Boolean,default:!1},preload:{type:String,default:"auto"},language:{type:String,default:"zh-CN"},aspectRatio:{type:String,default:"16:9"},src:{type:String},type:{type:String}},data:function(){return{swfUrl:ct.a}},methods:{playerReady:function(t){this.$emit("ready",t)}}},pt=ut,dt=(a("6787"),Object(o["a"])(pt,rt,st,!1,null,"7712b7ef",null)),ft=dt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"tabs"},t._l(t.tabs,(function(e,n){return a("li",{key:n},[a("span",{class:[{active:t.currentIndex==n},"tab-"+t.size],on:{click:function(e){return t.changeTab(n)}}},[t._v(" "+t._s(e.name||e)+" ")])])})),0)},mt=[],yt={props:{tabs:{type:Array},size:{type:String,default:"small"}},data:function(){return{currentIndex:0}},methods:{changeTab:function(t){this.currentIndex=t,this.$emit("change",t)}}},gt=yt,bt=(a("295a"),Object(o["a"])(gt,ht,mt,!1,null,"12baa10a",null)),vt=bt.exports},"2b86":function(t,e,a){},"472d":function(t,e,a){"use strict";var n=a("76f6"),i=a.n(n);i.a},"50d8":function(t,e,a){"use strict";var n=a("b337"),i=a.n(n);i.a},6264:function(t,e,a){"use strict";var n=a("67e9"),i=a.n(n);i.a},6787:function(t,e,a){"use strict";var n=a("06e39"),i=a.n(n);i.a},"67e9":function(t,e,a){},"76f6":function(t,e,a){},"99ce":function(t,e,a){},"9f1fa":function(t,e,a){},a9ac:function(t,e,a){},b337:function(t,e,a){},b631:function(t,e,a){"use strict";var n=a("2b86"),i=a.n(n);i.a},e22e:function(t,e,a){"use strict";var n=a("a9ac"),i=a.n(n);i.a},f144:function(t,e,a){"use strict";var n=a("9f1fa"),i=a.n(n);i.a}}]);