(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"0bb4":function(t,e,a){},"10d3":function(t,e,a){"use strict";var n=a("726c"),s=a.n(n);s.a},1354:function(t,e,a){},"2af9":function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return h})),a.d(e,"b",(function(){return x})),a.d(e,"c",(function(){return j})),a.d(e,"d",(function(){return B})),a.d(e,"f",(function(){return A}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"border_box"},[t._t("default")],2)},s=[],i={name:"BorderBox"},o=i,c=(a("10d3"),a("2877")),r=Object(c["a"])(o,n,s,!1,null,"2bc6b354",null),l=r.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"titleMain"},["default"==t.type?a("div",{staticClass:"default"},[a("span",{staticClass:"name"},[t._v(t._s(t.title))])]):t._e(),"primary"==t.type?a("div",{staticClass:"primary"},[a("span",{staticClass:"name"},[t._v(t._s(t.title))]),t._m(0)]):t._e(),"tab"==t.type?a("div",{staticClass:"tabs"},[a("span",{staticClass:"name"},[t._v(t._s(t.title))]),a("ul",{staticClass:"fr"},t._l(t.tabData,(function(e,n){return a("li",{key:n,class:n==t.tabIndex?"active":"",on:{click:function(e){return t.chooseDaliy(n)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e(),"select"==t.type?a("div",{staticClass:"select"},[a("span",{staticClass:"name"},[t._v(t._s(t.title))]),a("el-select",{staticClass:"fr",attrs:{size:"small",clearable:"","popper-append-to-body":!1,placeholder:"请选择"},model:{value:t.selectVal,callback:function(e){t.selectVal=e},expression:"selectVal"}},t._l(t.selectOption,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e()])},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fr"},[a("i"),a("i"),a("i")])}],p=(a("a9e3"),{name:"TitleBox",data:function(){return{activeName:"first",selectOption:[],selectVal:""}},model:{prop:"tabIndex",event:"change"},props:{tabData:{type:Array,default:function(){return[]}},tabIndex:{type:Number,default:0},type:{type:String,default:"primary"},title:{type:String,default:"pimary"}},mounted:function(){},methods:{chooseDaliy:function(t){this.$emit("change",t)}}}),m=p,f=(a("e7dd"),Object(c["a"])(m,u,d,!1,null,"4d972454",null)),h=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("border-box",[a("div",{staticClass:"statis"},[a("title-box",{attrs:{title:"监测项目覆盖率"}}),a("table",{attrs:{cellspacing:"0"}},[a("tr",[a("td",{on:{click:function(e){return t.openSiteDialog(1,"扬尘监控")}}},[a("p",{staticClass:"mb5"},[t._v("扬尘监控")]),a("div",{staticClass:"icon_bg"},[a("i",{staticClass:"iconfont iconicon_yangchen"})]),a("b",{staticClass:"mt10"},[t._v(t._s(t.data.pmsitecount))]),a("div",{staticClass:"check mt5"},[t._v(" 覆盖率:"),a("span",[t._v(t._s(t._f("NaNToNumber")(Math.round(t.data.pmsitecount/t.data.totalcount*100)))+"%")])])]),a("td",{on:{click:function(e){return t.openSiteDialog(2,"视频监控")}}},[a("p",{staticClass:"mb5"},[t._v("视频监控")]),a("div",{staticClass:"icon_bg"},[a("i",{staticClass:"iconfont iconicon_shipin"})]),a("b",{staticClass:"mt10"},[t._v(t._s(t.data.videositecount))]),a("div",{staticClass:"check mt5"},[t._v(" 覆盖率:"),a("span",[t._v(t._s(t._f("NaNToNumber")(Math.round(t.data.videositecount/t.data.totalcount*100)))+"%")])])]),a("td",{on:{click:function(e){return t.openSiteDialog(3,"冲洗抓拍")}}},[a("p",{staticClass:"mb5"},[t._v("冲洗抓拍")]),a("div",{staticClass:"icon_bg"},[a("i",{staticClass:"iconfont iconicon_chongxi"})]),a("b",{staticClass:"mt10"},[t._v(t._s(t.data.washsitecount))]),a("div",{staticClass:"check mt5"},[t._v(" 覆盖率:"),a("span",[t._v(t._s(t._f("NaNToNumber")(Math.round(t.data.washsitecount/t.data.totalcount*100)))+"%")])])])]),a("tr",[a("td",{on:{click:function(e){return t.openSiteDialog(4,"特种设备")}}},[a("p",{staticClass:"mb5"},[t._v("特种设备")]),a("div",{staticClass:"icon_bg"},[a("i",{staticClass:"iconfont iconicon_tezhong"})]),a("b",{staticClass:"mt10"},[t._v(t._s(t.data.specsitecount))]),a("div",{staticClass:"check mt5"},[t._v(" 覆盖率:"),a("span",[t._v(t._s(t._f("NaNToNumber")(Math.round(t.data.specsitecount/t.data.totalcount*100)))+"%")])])]),a("td",{on:{click:function(e){return t.openSiteDialog(5,"临边防护")}}},[a("p",{staticClass:"mb5"},[t._v("临边防护")]),a("div",{staticClass:"icon_bg"},[a("i",{staticClass:"iconfont iconicon-linbian"})]),a("b",{staticClass:"mt10"},[t._v(t._s(t.data.fencesitecount))]),a("div",{staticClass:"check mt5"},[t._v(" 覆盖率:"),a("span",[t._v(t._s(t._f("NaNToNumber")(Math.round(t.data.fencesitecount/t.data.totalcount*100)))+"%")])])]),a("td",{on:{click:function(e){return t.openSiteDialog(6,"实名考勤")}}},[a("p",{staticClass:"mb5"},[t._v("实名考勤")]),a("div",{staticClass:"icon_bg"},[a("i",{staticClass:"iconfont iconicon_shiming"})]),a("b",{staticClass:"mt10"},[t._v(t._s(t.data.attendsitecount))]),a("div",{staticClass:"check mt5"},[t._v(" 覆盖率:"),a("span",[t._v(t._s(t._f("NaNToNumber")(Math.round(t.data.attendsitecount/t.data.totalcount*100)))+"%")])])])])]),0==t.CITY.GROUPID?a("el-dialog",{attrs:{title:t.deviceName,visible:t.siteDialogVisible,top:"5vh"},on:{"update:visible":function(e){t.siteDialogVisible=e}}},[a("el-table",{key:0,attrs:{data:t.tableData1}},[a("el-table-column",{attrs:{prop:"groupshortname",label:"项目名称",align:"center"}}),a("el-table-column",{attrs:{prop:"sitecount",label:"项目数",align:"center"}}),a("el-table-column",{attrs:{prop:"accesscount",label:"已接入项目",align:"center"}}),1==t.type?a("el-table-column",{attrs:{prop:"pmtodaycount",label:"今日有数据工地数",align:"center"}}):t._e(),a("el-table-column",{attrs:{label:"未接入项目",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sitecount-e.row.accesscount))])]}}],null,!1,3172892900)}),a("el-table-column",{attrs:{label:"覆盖率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("NaNToNumber")(Math.round(e.row.accesscount/e.row.sitecount*100)))+"%")])]}}],null,!1,3453585711)}),1==t.type?a("el-table-column",{attrs:{label:"今日在线率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("NaNToNumber")(Math.round(e.row.pmtodaycount/e.row.accesscount*100)))+"%")])]}}],null,!1,2442271390)}):t._e()],1)],1):a("el-dialog",{attrs:{title:t.deviceName,visible:t.siteDialogVisible,top:"5vh"},on:{"update:visible":function(e){t.siteDialogVisible=e}}},[a("el-table",{key:1,staticClass:"site-list-table",attrs:{data:t.tableData2,"max-height":t.tableMaxHeight}},[a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":"","min-width":"3"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.boardurl?a("a",{attrs:{href:e.row.boardurl,target:"board"}},[t._v(" "+t._s(e.row.sitename)+" ")]):a("div",[t._v(" "+t._s(e.row.sitename)+" ")])]}}])},[a("template",{slot:"header"},[a("p",[t._v("项目名称")])])],2),a("el-table-column",{attrs:{label:"是否接入",align:"center","min-width":"1"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[0==e.isaccess?a("i",{staticClass:"el-icon-close icon",staticStyle:{color:"#ff3355"}}):a("i",{staticClass:"el-icon-check icon",staticStyle:{color:"#1fe2a8"}})]}}])}),1==t.type?a("el-table-column",{attrs:{label:"今日是否在线",align:"center","min-width":"1"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[0==e.pmtodaycount?a("i",{staticClass:"el-icon-close icon",staticStyle:{color:"#ff3355"}}):a("i",{staticClass:"el-icon-check icon",staticStyle:{color:"#1fe2a8"}})]}}],null,!1,3652885726)}):t._e()],1)],1)],1)])},v=[],_=(a("96cf"),a("1da1")),g=a("2f62"),C=a("365c"),y={name:"DeviceStatis",data:function(){return{siteDialogVisible:!1,boardDialogVisible:!1,tableData1:[],tableData2:[],data:[],deviceName:"",type:1,tableMaxHeight:500}},components:{BorderBox:l,TitleBox:h},computed:Object(g["c"])(["CITY"]),watch:{CITY:{immediate:!0,deep:!0,handler:function(t,e){this.getDevSiteCount(),this.getdevSiteList()}}},mounted:function(){this.tableMaxHeight=.75*document.documentElement.clientHeight},methods:{openSiteDialog:function(t,e){this.type=t,this.siteDialogVisible=!0,this.deviceName=e,this.getdevSiteList(t)},getDevSiteCount:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C["a"].getDevSiteCount({GROUPID:t.CITY.GROUPID});case 2:a=e.sent,n=a.success,s=a.data,n&&(t.data=s);case 6:case"end":return e.stop()}}),e)})))()},getdevSiteList:function(t){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,C["a"].getdevSiteList({GROUPID:e.CITY.GROUPID,type:t});case 2:n=a.sent,s=n.success,i=n.data,s&&(0==e.CITY.GROUPID?(e.tableData1=i,e.tableData2=[]):(e.tableData2=i,e.tableData1=[]));case 6:case"end":return a.stop()}}),a)})))()}}},w=y,D=(a("fafe"),Object(c["a"])(w,b,v,!1,null,"6eecbcd8",null)),x=D.exports,I=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"province"},[a("div",{attrs:{id:"mapTool"}})])}],S=(a("99af"),a("d81d"),a("b64b"),a("ac1f"),a("1276"),a("313e")),T={name:"MapProvince",data:function(){return{myChart:{},timer:null,chartOption:{}}},props:["height"],computed:Object(g["c"])(["CITY","CITYCENTER"]),created:function(){},mounted:function(){var t=this;this.$nextTick((function(){t.mapInit()})),window.addEventListener("resize",(function(){t.myChart.resize()}))},destroyed:function(){this.timer&&clearInterval(this.timer)},methods:{mapInit:function(){var t=document.getElementById("mapTool");this.myChart=S.init(t);var e=this.CITYCENTER;this.myChart.showLoading(),this.myChart.hideLoading();var n,s=null;"320200"==this.CITY.mapcode?s=a("0731"):"320700"==this.CITY.mapcode?s=a("c069"):"320506"==this.CITY.mapcode&&(s=a("dc9d")),S.registerMap("js",s),this.myChart.setOption(n={visualMap:{show:!1,max:100,seriesIndex:[1],inRange:{color:["#A5DCF4","#006edd"]}},geo:[{map:"js",roam:!1,zoom:1.1,scaleLimit:{min:0,max:3},itemStyle:{normal:{areaColor:"#013C62",shadowColor:"rgba(0,0,0,0.7)",shadowBlur:20,shadowOffsetX:-5,shadowOffsetY:15}},tooltip:{show:!1}}],series:[{type:"scatter",coordinateSystem:"geo",hoverAnimation:!0,z:5,data:[],symbolSize:14,label:{normal:{show:!1,fontSize:16,formatter:function(t){return"{fline|".concat(t.data.city,"}\n{cline|待审:").concat(t.data.projstatus1,"  在建:").concat(t.data.projstatus2,"  停工:").concat(t.data.projstatus3,"}\n{bline|终止安监:").concat(t.data.projstatus4,"  竣工:").concat(t.data.projstatus5,"}")},position:"top",backgroundColor:"#F7B500",padding:[10,10],borderRadius:3,lineHeight:30,color:"#000",rich:{fline:{padding:[0,10,0,10],color:"#000",fontSize:"16"},cline:{padding:[0,40,0,10],color:"#000"},bline:{padding:[-10,40,0,10],color:"#000"}}},emphasis:{show:!0}},itemStyle:{color:"#F7B500"}},{type:"map",mapType:"js",geoIndex:-1,zoom:1.1,label:{show:!0,color:"#ffffff",emphasis:{color:"white",show:!1}},itemStyle:{normal:{borderColor:"#2980b9",borderWidth:1,areaColor:"#12235c"},emphasis:{areaColor:"#FA8C16",borderWidth:0,color:"green"}},data:[]}]});var i=Object.keys(e).map((function(t){return{name:t,value:parseInt(100*Math.random())}}));n.series[1].data=i,this.myChart.setOption(n),this.getMapData()},getMapData:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){var a,n,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C["a"].getMap({GROUPID:t.CITY.GROUPID});case 2:a=e.sent,n=a.success,s=a.data,n&&(i=s.map((function(t){var e=t;return e.city=t.groupshortname,e.value=t.lnglat.split("|"),e})),o=t.myChart.getOption(),o.series[0]["data"]=i,t.myChart.setOption(o),c=0,t.timer=setInterval((function(){t.myChart.dispatchAction({type:"downplay",seriesIndex:0}),t.myChart.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:c}),c>=i.length-1?c=0:c++}),3e3));case 6:case"end":return e.stop()}}),e)})))()}}},O=T,N=(a("d19f"),Object(c["a"])(O,I,k,!1,null,"da9a1c58",null)),j=N.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("border-box",[a("div",{staticClass:"project"},[a("title-box",{attrs:{title:t.cityGeneral}}),a("div",{staticClass:"mb10 count-div"},[a("div",[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-office-building",staticStyle:{width:"36px",height:"36px"}}),a("p",[t._v(" 工地总数 "),a("span",{staticClass:"warn"},[a("span",{staticClass:"under",on:{click:function(e){return t.openProject("")}}},[t._v(t._s(t.datas.totalcount))])])])])]),a("div",[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-coin",staticStyle:{width:"36px",height:"36px"}}),a("p",[t._v(" 总投资金额(亿) "),a("span",{staticClass:"warn"},[t._v(t._s(t.datas.sitecost))])])])])]),a("el-row",{staticClass:"bottom-bg"},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"foot mt10"},[a("span",[t._v("接入工地")]),a("b",{staticClass:"warn",on:{click:function(e){return t.openProject("已接入")}}},[a("font",{staticClass:"under"},[t._v(t._s(t.datas.accesscount))])],1)])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"foot mt10"},[a("span",[t._v("未接入工地")]),a("b",{staticClass:"warn",on:{click:function(e){return t.openProject("未接入")}}},[a("font",{staticClass:"under"},[t._v(t._s(t.datas.totalcount-t.datas.accesscount))])],1)])])],1),t._t("default")],2),a("a",{directives:[{name:"show",rawName:"v-show",value:t.CITY.groupshortname.indexOf("东海")>=0,expression:"CITY.groupshortname.indexOf('东海') >= 0"}],staticClass:"spec-link",attrs:{href:"http://api.lmsp.yunbi-iot.com/#/login?username=18852409816&password=123456",target:"_blank"}},[t._v("起重机械设备智能监管平台"),a("i",{staticClass:"el-icon-arrow-right"})])])},M=[],R=a("5530"),Y={props:{datas:{type:Object,default:function(){return{}}}},data:function(){return{}},name:"ProjectStatis",components:{BorderBox:l,TitleBox:h},computed:Object(R["a"])(Object(R["a"])({},Object(g["c"])(["CITY"])),{},{cityGeneral:function(){return this.CITY.groupshortname?"【".concat(this.CITY.groupshortname,"】项目概况"):""}}),methods:{openProject:function(t){this.$emit("openProject",t)}}},P=Y,z=(a("997f"),Object(c["a"])(P,E,M,!1,null,"0a6b195e",null)),B=z.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.startEndDate,callback:function(e){t.startEndDate=e},expression:"startEndDate"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(e){return t.getWarnData()}}},[t._v("查询")]),a("el-table",{staticClass:"mb20",staticStyle:{cursor:"default"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"createdate",label:"时间","min-width":"3"}}),a("el-table-column",{attrs:{prop:"siteshortname",label:"监测对象","min-width":"2"}}),5==t.warnType?a("el-table-column",{attrs:{prop:"warnstatus",label:"状态","min-width":"1"}}):t._e(),a("el-table-column",{attrs:{prop:"content",label:"告警内容","min-width":"5","show-overflow-tooltip":""}})],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.pagesize,"current-page":t.pageindex,total:t.totalcount},on:{"current-change":t.pageChange}})],1)],1)},$=[],U={name:"WarnList",data:function(){return{tableData:[],pagesize:10,pageindex:1,totalcount:0,startEndDate:["",""]}},props:{warnType:{type:Number,default:0},SITEID:{type:Number,default:0},GROUPID:{type:Number,default:0}},mounted:function(){},methods:{chooseDaliy:function(t){this.$emit("change",t)},pageChange:function(t){this.getWarnData(t)},getWarnData:function(t){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.pageindex=t||1,a.next=3,C["a"].getEnvWarnList({GROUPID:e.GROUPID,SITEID:e.SITEID,startdate:e.startEndDate[0],enddate:e.startEndDate[1],type:e.warnType,pageindex:e.pageindex,pagesize:e.pagesize});case 3:n=a.sent,s=n.success,i=n.data,s&&(e.tableData=i,o=0,i.length>0&&(o=i[0]["totalcount"]),e.totalcount=o);case 7:case"end":return a.stop()}}),a)})))()},setStartEndData:function(t){this.startEndDate=t}}},V=U,L=(a("50e6"),Object(c["a"])(V,G,$,!1,null,"004c68fe",null)),A=L.exports},3699:function(t,e,a){},"50e6":function(t,e,a){"use strict";var n=a("3699"),s=a.n(n);s.a},6372:function(t,e,a){},6410:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:0}},t._l(t.list,(function(e){return a("el-col",{key:e.name,staticClass:"column",attrs:{offset:0,span:24/t.columnNum}},[a("p",{staticClass:"name"},[t._v(t._s(e.name))]),a("p",{staticClass:"value"},[t._v(t._s(e.value))])])})),1)],1)},s=[],i=(a("a9e3"),{props:{columnNum:{type:Number,default:1},list:{type:Array,default:[]}}}),o=i,c=(a("a8a7"),a("2877")),r=Object(c["a"])(o,n,s,!1,null,"41c280d8",null);e["a"]=r.exports},"726c":function(t,e,a){},"997f":function(t,e,a){"use strict";var n=a("0bb4"),s=a.n(n);s.a},a8a7:function(t,e,a){"use strict";var n=a("6372"),s=a.n(n);s.a},ca7f:function(t,e,a){},d19f:function(t,e,a){"use strict";var n=a("ca7f"),s=a.n(n);s.a},e60b:function(t,e,a){},e7dd:function(t,e,a){"use strict";var n=a("e60b"),s=a.n(n);s.a},fafe:function(t,e,a){"use strict";var n=a("1354"),s=a.n(n);s.a}}]);